<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Route Alternatives</title>

  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />

  <style>
    body { margin: 0; }
    #map { height: 100vh; width: 100%; }
  </style>
</head>

<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    const map = L.map('map');
    map.setView([40.0, -104.8], 8); // temporary initial view (Colorado-ish)


    // Change base map to a more subtle option
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap & CARTO'
    }).addTo(map);

    // Define route and point styles
    const styles = {
      base:    { color: 'red',   weight: 5 },
      nlcd:    { color: 'green', weight: 5 },
      parcels: { color: 'blue',  weight: 5 }
    };
    
    const startStyle = {
      radius: 8,
      fillColor: "green",
      color: "blue",
      weight: 1,
      fillOpacity: 1
    };

    const endStyle = {
      radius: 8,
      fillColor: "black",
      color: "blue",
      weight: 1,
      fillOpacity: 1
    };

    // Fetch GeoJSON files
    Promise.all([
      fetch('base_route_wgs.geojson').then(r => r.json()),
      fetch('route_nlcd_wgs.geojson').then(r => r.json()),
      fetch('route_parcels_wgs.geojson').then(r => r.json()),
      fetch('Start.geojson').then(r => r.json()),
      fetch('Water_treatment_plant.geojson').then(r => r.json())
    ]).then(([base, nlcd, parcels, startPt, endPt]) => {

      // Create layers for start and end points
      const startLayer = L.geoJSON(startPt, {
        pointToLayer: (feature, latlng) => L.circleMarker(latlng, startStyle)
      }).addTo(map);

      const endLayer = L.geoJSON(endPt, {
        pointToLayer: (feature, latlng) => L.circleMarker(latlng, endStyle)
      }).addTo(map);

      // Create layers for the route alternatives
      const baseLayer = L.geoJSON(base, { style: styles.base }).addTo(map);
      const nlcdLayer = L.geoJSON(nlcd, { style: styles.nlcd });
      const parcelsLayer = L.geoJSON(parcels, { style: styles.parcels });

      // Add layer controls
      L.control.layers(null, {
        "Balanced Route": baseLayer,
        "Environmental Route": nlcdLayer,
        "Parcel Use Route": parcelsLayer,
        "Source Reservoir": startLayer,
        "Thornton Water Treatment Plant": endLayer
      }, { collapsed: false }).addTo(map);

      // Adjust map view to fit all layers
      const all = L.featureGroup([baseLayer, nlcdLayer, parcelsLayer, startLayer, endLayer]);
      map.fitBounds(all.getBounds());
    });
  </script>
</body>
</html>



